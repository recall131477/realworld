<script setup lang="ts">
import { ref, onMounted } from 'vue';
import { getTags } from '@/api';
import type { ErrorObject } from '@/types/error';

const tags = ref<string[]>([]);

const isLoading = ref(false);

const errors = ref<ErrorObject>({});

onMounted(async () => {
  isLoading.value = true;

  try {
    const res = await getTags();
    tags.value = res.data.tags;
  } catch (error) {
    errors.value = (error as any).errors;
  }

  isLoading.value = false;
});

// 假資料
const fakeTags = ref<string[]>(['TypeScript', 'Vue', 'React', 'Node', 'CSS']);
</script>

<script lang="ts">
export default {
  name: 'TagsComponent',
};
</script>

<template>
  <div v-if="isLoading" class="py-6">Loading tags...</div>
  <!-- <template v-else>
    <div class="mt-1 flex flex-wrap gap-1">
      <router-link
        :to="{
          name: 'tag',
          params: {
            tag: tag,
          },
        }"
        class="rounded-full bg-[#818a91] px-2 py-0.5 text-sm text-white duration-300 hover:bg-[#687077]"
        v-for="tag in tags"
        :key="tag"
        >{{ tag }}</router-link
      >
    </div>
  </template> -->
  <template v-else>
    <div class="mt-1 flex flex-wrap gap-1">
      <router-link
        :to="{
          name: 'tag',
          params: {
            tag: tag,
          },
        }"
        class="rounded-full bg-[#818a91] px-2 py-0.5 text-sm text-white duration-300 hover:bg-[#687077]"
        v-for="tag in fakeTags"
        :key="tag"
        >{{ tag }}</router-link
      >
    </div>
  </template>
</template>
