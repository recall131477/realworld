import{e as x,p as R,k as j,s as N,f,r as Z,o as c,c as u,b as o,a as k,w as A,d as P,t as b,l as $,n as L,F as C,i as S,z as M,A as V,q as T,u as F,g as I,v as G,S as H,K as y}from"./index-abc583f2.js";import{f as U,p as B}from"./index-6f68b1e3.js";const D={class:"border-t border-black/10 py-6"},z={class:"flex items-center justify-between gap-x-4"},E={class:"flex items-center gap-x-2"},J=["src","alt"],q={class:"block text-xs text-[#bbb]"},K=["disabled"],O=o("i",{class:"ion-heart"},null,-1),X={class:"text-2xl font-semibold leading-[1.1]"},Q={class:"mt-1 font-light text-[#999]"},W={class:"mt-4 flex justify-between gap-x-4"},Y=o("span",{class:"text-sm font-light text-[#bbb]"},"Read more...",-1),ee={class:"flex flex-wrap gap-1"},te={name:"ArticlePreviewComponent"},ae=x({...te,props:{article:{}},emits:["update-article-favorite"],setup(w,{emit:g}){const r=w,n=R(),v=j(),{isLoggedIn:h}=N(v),i=f(!1),m=f({}),t=async()=>{h.value||n.push({name:"login"}),i.value=!0;try{const e=r.article.favorited?await M(r.article.slug):await V(r.article.slug);g("update-article-favorite",e.data.article)}catch(e){m.value=e.errors}i.value=!1};return(e,l)=>{const d=Z("router-link");return c(),u("div",D,[o("div",z,[o("div",E,[k(d,{to:{name:"profile",params:{username:e.article.author.username}}},{default:A(()=>[o("img",{class:"h-8 w-8 rounded-full object-cover",src:e.article.author.image,alt:e.article.author.username},null,8,J)]),_:1},8,["to"]),o("div",null,[k(d,{to:{name:"profile",params:{username:e.article.author.username}},class:"block font-medium text-primary"},{default:A(()=>[P(b(e.article.author.username),1)]),_:1},8,["to"]),o("span",q,b($(U)(e.article.createdAt)),1)])]),o("button",{type:"button",class:L(["inline-block rounded border border-primary px-2 py-1 text-sm leading-tight duration-300 hover:bg-primary hover:text-white disabled:pointer-events-none disabled:opacity-60",e.article.favorited?"bg-primary text-white":"text-primary"]),disabled:i.value,onClick:t},[O,P(" "+b(e.article.favoritesCount),1)],10,K)]),k(d,{to:{name:"article",params:{slug:e.article.slug}},class:"mt-4 block"},{default:A(()=>[o("h2",X,b(e.article.title),1),o("p",Q,b(e.article.description),1),o("div",W,[Y,o("ul",ee,[(c(!0),u(C,null,S(e.article.tagList,_=>(c(),u("li",{class:"rounded-full border border-[#ddd] px-2 text-sm font-light text-[#aaa]",key:_},[o("span",null,b(_),1)]))),128))])])]),_:1},8,["to"])])}}}),re={class:"mt-4 flex"},se=["aria-label","onClick"],oe={name:"PaginationComponent"},ne=x({...oe,props:{articlesCount:{},currentPage:{}},emits:["change-page"],setup(w,{emit:g}){const r=w,n=T(()=>Math.ceil(r.articlesCount/10)),v=T(()=>{const i=(t,e)=>Array.from({length:e-t+1},(l,d)=>d+t);return(()=>{let t;n.value<=7?t=7:t=r.currentPage>4&&r.currentPage<n.value-3?2:4;const e={start:Math.round(r.currentPage-t/2),end:Math.round(r.currentPage+t/2)};(e.start-1===1||e.end+1===n.value)&&(e.start+=1,e.end+=1);let l=r.currentPage>t?i(Math.min(e.start,n.value-t),Math.min(e.end,n.value)):i(1,Math.min(n.value,t+1));const d=(_,s)=>l.length+1!==n.value?s:[_];return l[0]!==1&&(l=d(1,[1,"..."]).concat(l)),Number(l[l.length-1])<n.value&&(l=l.concat(d(n.value,["...",n.value]))),l})()}),h=i=>{i!=="..."&&g("change-page",i)};return(i,m)=>(c(),u("ul",re,[(c(!0),u(C,null,S(v.value,t=>(c(),u("li",{key:t},[o("a",{"aria-label":`Go to page ${t}`,href:"javascript:;",class:L(["-ml-[1px] block border px-3 py-2 duration-300 hover:bg-[#eceeef]",{"border-[#ddd] bg-white text-primary":i.currentPage!==t,"border-primary bg-primary text-white":i.currentPage===t}]),onClick:e=>h(t)},b(t),11,se)]))),128))]))}}),ie={key:0,class:"border-t border-black/10 py-6"},le={key:0,class:"border-t border-black/10 py-6"},ce={name:"ArticleListComponent"},pe=x({...ce,setup(w){const g=F(),r=f([]),n=f(0),v=f(1),h=f(!1),i=f({}),m=async()=>{h.value=!0;const s={type:g.name,params:{...B(v.value)}};t(s,g);try{const a=await H(s);r.value=a.data.articles,n.value=a.data.articlesCount}catch(a){i.value=a.errors}h.value=!1},t=(s,a)=>{switch(a.name){case"tag":if(typeof a.params.tag=="string"){const p={...s};p.params.tag=a.params.tag}break;case"profile":if(typeof a.params.username=="string"){const p={...s};p.params.author=a.params.username}break;case"profile-favorites":if(typeof a.params.username=="string"){const p={...s};p.params.favorited=a.params.username}break}},e=s=>{const a=r.value.findIndex(p=>p.slug===s.slug);r.value[a].favorited=s.favorited,r.value[a].favoritesCount=s.favoritesCount,g.name==="profile-favorites"&&m()},l=s=>{v.value=s,m()};I(()=>{m()}),G(g,()=>{m()},{immediate:!0});const d=f([{title:"深入了解 TypeScript 泛型",description:"學習如何有效使用 TypeScript 的泛型功能。",body:"泛型是 TypeScript 中一個非常強大的工具，可以用來撰寫靈活又可重複使用的程式碼...",tagList:["TypeScript","泛型","程式設計"],slug:"understanding-typescript-generics",createdAt:"2024-11-19T08:30:00Z",updatedAt:"2024-11-19T10:00:00Z",favorited:!0,favoritesCount:120,author:{username:"程式達人",bio:"熱愛程式設計，喜歡分享知識。",image:y,following:!1}},{title:"Vue 3 的新功能介紹",description:"完整介紹 Vue 3 的全新功能。",body:"Vue 3 帶來了 Composition API、更快的效能，以及更完善的 TypeScript 支援...",tagList:["Vue","JavaScript","前端開發"],slug:"vue-3-whats-new",createdAt:"2024-11-18T14:00:00Z",updatedAt:"2024-11-18T16:30:00Z",favorited:!1,favoritesCount:75,author:{username:"前端高手",bio:"專職於前端開發，也是 UI/UX 愛好者。",image:y,following:!0}},{title:"React Hooks 大解密",description:"了解 React Hooks 的基本觀念與進階應用。",body:"React Hooks，例如 `useState` 和 `useEffect`，讓開發者可以在函式型元件中輕鬆管理狀態與生命週期...",tagList:["React","Hooks","JavaScript"],slug:"demystifying-react-hooks",createdAt:"2024-11-17T09:00:00Z",updatedAt:"2024-11-17T09:45:00Z",favorited:!0,favoritesCount:200,author:{username:"React 達人",bio:"分享 React 生態系的開發技巧與教學。",image:y,following:!1}},{title:"深入淺出 Node.js Streams",description:"帶你認識 Node.js 中的資料流處理。",body:"資料流是 Node.js 中一個核心概念，適合用來高效處理大量的資料...",tagList:["Node.js","後端開發","資料流"],slug:"exploring-nodejs-streams",createdAt:"2024-11-16T12:00:00Z",updatedAt:"2024-11-16T14:00:00Z",favorited:!1,favoritesCount:58,author:{username:"後端專家",bio:"專精於 Node.js 的後端開發工程師。",image:y,following:!0}},{title:"CSS Grid：打造現代化版面設計",description:"掌握 CSS Grid，輕鬆完成現代化的網頁版面設計。",body:"CSS Grid 是 CSS 中一套非常強大的版面配置工具，讓開發者可以快速建立響應式的設計...",tagList:["CSS","前端設計","網頁排版"],slug:"css-grid-modern-layouts",createdAt:"2024-11-15T07:15:00Z",updatedAt:"2024-11-15T09:20:00Z",favorited:!0,favoritesCount:90,author:{username:"CSS 女王",bio:"熱愛所有與樣式設計相關的事物。",image:y,following:!1}}]),_=f(100);return(s,a)=>h.value?(c(),u("div",ie," Loading articles... ")):(c(),u(C,{key:1},[d.value.length?(c(),u(C,{key:1},[o("ul",null,[(c(!0),u(C,null,S(d.value,p=>(c(),u("li",{key:p.slug},[k(ae,{article:p,onUpdateArticleFavorite:e},null,8,["article"])]))),128))]),k(ne,{"articles-count":_.value,"current-page":v.value,onChangePage:l},null,8,["articles-count","current-page"])],64)):(c(),u("div",le," No articles are here... yet. "))],64))}});export{pe as _};
