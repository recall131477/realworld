import{e as C,u as B,p as R,k as S,s as V,f as s,g as A,v as I,q as L,r as N,o as r,c as n,b as e,F as h,t as i,j as U,w as f,n as p,d as c,a as _,l as b,R as j,x as E,y as M,K as T}from"./index-abc583f2.js";import{_ as q}from"./ArticleList.vue_vue_type_script_setup_true_lang-6f58d852.js";import"./index-6f68b1e3.js";const z={class:"bg-[#f3f3f3] py-8 pb-4"},D={class:"mx-auto max-w-[1140px] px-[15px]"},K={class:"md:mx-auto md:w-10/12"},$={key:0},G=["src","alt"],H={class:"mt-4 text-center"},J={class:"text-2xl font-bold"},O={class:"mt-1 font-light text-[#aaa]"},Q={class:"mt-2 text-right"},W=e("i",{class:"ion-gear-a"},null,-1),X=["disabled"],Y=e("i",{class:"ion-plus-round"},null,-1),Z={class:"pt-6"},ee={class:"mx-auto max-w-[1140px] px-[15px]"},oe={class:"md:mx-auto md:w-10/12"},ae={class:"flex"},te={name:"ProfileView"},ce=C({...te,setup(se){const l=B(),w=R(),y=S(),{userInfo:k,isLoggedIn:v}=V(y),t=s({username:"",bio:"",image:"",following:!1}),u=s(!1),d=s(!1),x=s({}),g=async()=>{u.value=!0;try{const o=await j(l.params.username);t.value=o.data.profile}catch(o){x.value=o.errors}u.value=!1},F=async()=>{v.value||w.push({name:"login"}),d.value=!0;try{const o=t.value.following?await E(t.value.username):await M(t.value.username);t.value.following=o.data.profile.following}catch(o){x.value=o.errors}d.value=!1};A(()=>{g()}),I(()=>l.params.username,()=>{g()},{immediate:!0});const a=s({username:"肉鬆",bio:"大家好，我是肉鬆，是一名前端工程師。",image:T,following:!1}),P=L(()=>{var o;return v&&((o=k.value)==null?void 0:o.username)===a.value.username});return(o,re)=>{const m=N("router-link");return r(),n(h,null,[e("div",z,[e("div",D,[e("div",K,[u.value?(r(),n("div",$,"Loading profile...")):(r(),n(h,{key:1},[e("img",{src:a.value.image,alt:a.value.username,class:"mx-auto h-[100px] w-[100px] rounded-full object-cover"},null,8,G),e("div",H,[e("h1",J,i(a.value.username),1),e("p",O,i(a.value.bio),1)]),e("div",Q,[P.value?(r(),U(m,{key:0,to:{name:"settings"},class:"inline-block rounded border border-[#999] px-2 py-1 text-sm leading-tight text-[#999] duration-300 hover:bg-[#ccc]"},{default:f(()=>[W,c(" Edit Profile Settings ")]),_:1})):(r(),n("button",{key:1,type:"button",class:p(["inline-block rounded border border-[#999] px-2 py-1 text-sm leading-tight text-[#999] hover:bg-[#ccc] disabled:pointer-events-none disabled:opacity-60",{"bg-white text-[#373a3c]":a.value.following}]),disabled:d.value,onClick:F},[Y,c("   "+i(a.value.following?"Unfollow":"Follow")+" "+i(a.value.username),1)],10,X))])],64))])])]),e("div",Z,[e("div",ee,[e("div",oe,[e("ul",ae,[e("li",null,[_(m,{to:{name:"profile"},class:p(["block border-b-2 px-4 py-2 duration-300 hover:border-primary hover:text-primary",b(l).name==="profile"?"border-primary text-primary":"border-transparent text-[#aaa]"])},{default:f(()=>[c("My Articles ")]),_:1},8,["class"])]),e("li",null,[_(m,{to:{name:"profile-favorites"},class:p(["block border-b-2 px-4 py-2 duration-300 hover:border-primary hover:text-primary",b(l).name==="profile-favorites"?"border-primary text-primary":"border-transparent text-[#aaa]"])},{default:f(()=>[c("Favorited Articles")]),_:1},8,["class"])])]),_(q)])])])],64)}}});export{ce as default};
