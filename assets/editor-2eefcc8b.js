import{e as V,u as C,p as E,f as i,g as T,v as N,o as n,c as d,a as f,b as e,E as h,C as u,D as c,O as U,F as y,i as B,m as D,I as K,P as M,Q as $,l as w,d as F,t as P}from"./index-abc583f2.js";import{_ as R}from"./Loading.vue_vue_type_script_setup_true_lang-07321e25.js";import{_ as S}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-bb59ed81.js";import{d as W}from"./index-7324e164.js";const z={class:"pt-6"},H={class:"mx-auto max-w-[1140px] px-[15px]"},I={class:"md:mx-auto md:w-10/12"},O=["disabled"],Q=["onKeypress"],j={key:0,class:"mt-2 flex flex-wrap gap-1"},q=["onClick"],G=e("div",{class:"text-right"},[e("button",{type:"submit",class:"inline-block rounded bg-primary px-6 py-3 text-xl leading-tight text-white duration-300 hover:bg-primary-dark"}," Publish Article ")],-1),J={name:"EditorArticleView"},ae=V({...J,setup(X){const o=C(),_=E(),t=i({title:"",description:"",body:"",tagList:[]}),r=i(""),p=i(!1),b=i(!1),g=i({}),m=async()=>{p.value=!0;try{const l=await K(o.params.slug);t.value=l.data.article}catch(l){g.value=l.errors}p.value=!1},k=async()=>{b.value=!0;try{const l=o.params.slug,a=o.params.slug?await M(l,{article:t.value}):await $({article:t.value});_.push({name:"article",params:{slug:a.data.article.slug}})}catch(l){g.value=l.errors}b.value=!1},v=W(()=>{k()},250),A=()=>{r.value!==""&&(t.value.tagList.push(r.value),r.value="")},L=l=>{t.value.tagList.splice(l,1)};return T(()=>{o.params.slug&&m()}),N(()=>o.params.slug,l=>{l?m():t.value={title:"",description:"",body:"",tagList:[]}}),(l,a)=>(n(),d(y,null,[f(R,{isLoading:p.value},null,8,["isLoading"]),e("div",z,[e("div",H,[e("div",I,[f(S,{errors:g.value},null,8,["errors"]),e("form",{onSubmit:a[4]||(a[4]=h((...s)=>w(v)&&w(v)(...s),["prevent"]))},[e("fieldset",{class:"space-y-4",disabled:b.value},[e("fieldset",null,[u(e("input",{type:"text",id:"title",name:"title",autocomplete:"title",class:"border-black/15 block w-full rounded border bg-white px-6 py-3 text-xl leading-tight text-[#55595c] outline-none placeholder:text-[#999] disabled:pointer-events-none disabled:bg-[#eceeef]",placeholder:"Article Title","onUpdate:modelValue":a[0]||(a[0]=s=>t.value.title=s)},null,512),[[c,t.value.title]])]),e("fieldset",null,[u(e("input",{type:"text",id:"about",name:"about",class:"border-black/15 block w-full rounded border bg-white px-6 py-3 text-xl leading-tight text-[#55595c] outline-none placeholder:text-[#999] disabled:pointer-events-none disabled:bg-[#eceeef]",placeholder:"What's this article about?","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.description=s)},null,512),[[c,t.value.description]])]),e("fieldset",null,[u(e("textarea",{class:"border-black/15 block w-full resize-none rounded border bg-white px-6 py-3 text-xl leading-tight text-[#55595c] outline-none placeholder:text-[#999999] disabled:pointer-events-none disabled:bg-[#eceeef]",rows:"8",placeholder:"Write your article (in markdown)","onUpdate:modelValue":a[2]||(a[2]=s=>t.value.body=s)},null,512),[[c,t.value.body]])]),e("fieldset",null,[u(e("input",{type:"text",id:"tags",name:"tags",class:"border-black/15 block w-full rounded border bg-white px-6 py-3 text-xl leading-tight text-[#55595c] outline-none placeholder:text-[#999] disabled:pointer-events-none disabled:bg-[#eceeef]",placeholder:"Enter tags","onUpdate:modelValue":a[3]||(a[3]=s=>r.value=s),onKeypress:U(h(A,["prevent"]),["enter"])},null,40,Q),[[c,r.value]]),t.value.tagList.length?(n(),d("div",j,[(n(!0),d(y,null,B(t.value.tagList,(s,x)=>(n(),d("span",{key:s+x,class:"rounded-full bg-[#818a91] px-2 py-0.5 text-xs text-white"},[e("i",{class:"ion-close-round mr-1 cursor-pointer",onClick:Y=>L(x)},null,8,q),F(" "+P(s),1)]))),128))])):D("",!0)]),G],8,O)],32)])])])],64))}});export{ae as default};
